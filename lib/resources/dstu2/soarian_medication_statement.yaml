---
name: MedicationStatement
field_name_base_url: http://hl7.org/fhir/DSTU2/medicationstatement-definitions.html#MedicationStatement
fields:
- name: resourceType
  required: 'Yes'
  cardinality: 1..1
  type: string
  description: The type of the FHIR resource.
  example: |
    {
      "resourceType: "MedicationStatement"
    }
  note: resourceType must be MedicationStatement
  url: http://hl7.org/fhir/DSTU2/json.html#resources

- name: id
  required: 'Yes'
  cardinality: 0..1
  type: id
  description: The logical id of the resource to update.
  example: |
    {
      "id": "123412"
    }
  url: http://hl7.org/fhir/DSTU2/resource-definitions.html#Resource.id
  action: update

- name: patient
  required: 'Yes'
  cardinality: 1..1
  type: Reference (Patient)
  description: Who is/was taking the medication.
  example: |
    {
      "patient": {
        "reference": "Patient/5366327"
      }
    }

- name: status
  required: 'Yes'
  cardinality: 1..1
  type: code
  description: >
    A code representing the patient or other source's judgment about the state of the medication used that this
    statement is about.
  example: |
    {
      "status": "active"
    }



- name: effectivePeriod
  required: 'No'
  cardinality: 0..1
  type: Period
  description: The interval of time during which it is being asserted that the patient was taking the medication.
  note: If effectivePeriod and dosage.timing.repeat.boundsPeriod are both populated they need to be the same value.
  example: |
    {
      "effectivePeriod": {
        "start": "2015-05-05T14:00:00.000Z",
        "end": "2015-05-06T01:00:00.000Z"
      }
    }
  url: http://hl7.org/fhir/DSTU2/medicationstatement-definitions.html#MedicationStatement.effective_x_
  action: create

- name: note
  required: 'No'
  cardinality: 0..1
  type: string
  description: Provides extra information about the medication statement that is not conveyed by the other attributes.
  example: |
    {
      "note": "do not take with alcohol"
    }
  action: create

- name: medication[x]
  required: 'Yes'
  cardinality: 1..1
  type: CodeableConcept | contained Reference (Medication)
  description: Identifies the medication being administered.
  note:
  - update: This must be the current medication. It cannot be modified.
  example: |
    {
      "medicationReference": {
        "reference": "#456235",
        "display": "Ibuprofen"
      }
    }

    {
      "medicationCodeableConcept": {
        "coding": [
          {
            "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
             "code": "2551",
             "display": "Ciprofloxacin",
             "userSelected": false
          }
        ],
        "text": "ciprofloxacin"
      }
    }
  url: http://hl7.org/fhir/DSTU2/medicationstatement-definitions.html#MedicationStatement.medication_x_
  binding:
    description: A code that defines the type of medication.
    terminology:
    - display: RxNorm
      system: http://www.nlm.nih.gov/research/umls/rxnorm

- name: dosage
  required: 'No'
  cardinality: 0..*
  type: BackboneElement
  description: How the medication is/was used by the patient.
  note: At most one dosage can be populated.
  action: create
  children:

  - name: text
    required: 'No'
    cardinality: 0..1
    type: string
    description: Free text dosage information as reported about a patient's medication use.
    example: |
      {
        "text": "2, Oral, 2x/Wk, first dose 05/05/15 10:00:00 EDT"
      }

  - name: timing
    required: 'No'
    cardinality: 0..1
    type: Timing
    description: The timing schedule for giving the medication to the patient.
    children:

    - name: repeat
      required: 'No'
      cardinality: 0..1
      type: Element
      description: A set of rules that describe when the event should occur.
      url: http://hl7.org/fhir/DSTU2/datatypes-definitions.html#Timing.repeat
      children:

      - name: bounds[x]
        required: 'No'
        cardinality: 0..1
        type: Period | Duration
        description: >
          Either the length of timing schedule or the outer bounds for start and/or end limits of the timing schedule.
        example: |
          {
            "boundsPeriod": {
              "start": "2014-11-03T14:38:00.000-05:00"
            }
          }
          
          {
            "boundsQuantity": {
              "value": 10,
              "unit": "days",
              "system": "http://unitsofmeasure.org",
              "code": "d"
            }
          }

        url: http://hl7.org/fhir/DSTU2/datatypes-definitions.html#Timing.repeat.bounds_x_

      - name: count
        required: 'No'
        cardinality: 0..1
        type: integer
        description: A total count of the desired number of repetitions.
        example: |
          {
            "count": 5
          }
        url: http://hl7.org/fhir/DSTU2/datatypes-definitions.html#Timing.repeat.count

  

  - name: quantityQuantity
    required: 'No'
    cardinality: 0..1
    type: SimpleQuantity
    description: The amount of therapeutic or other substance given at one administration event.
    example: |
      {
        "quantityQuantity": {
          "value": 2,
          "unit": "tabs",
          "system": "http://unitsofmeasure.org",
          "code": "tbl"
        }
      }
    url: http://hl7.org/fhir/DSTU2/medicationstatement-definitions.html#MedicationStatement.dosage.quantity_x_
